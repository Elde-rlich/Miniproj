<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Dashboard</title>
    <link rel="stylesheet" href="{% static 'journal/journal-style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'dashboard/home-style.css' %}">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="profile">
                <img src="{% static 'dashboard/profile.jpg' %}" alt="profile" class="profile-img">
                <div class="profile-info">
                    <h2>Sandy</h2>
                    <p>sandy@gmail.com</p>
                </div>
            </div>
            <div class="menu">
                <div class="menu-item"><a class="menu-item" href="{% url 'home' %}">Dashboard</a></div>
                <div class="menu-item"><a class="menu-item" href="{% url 'journal_list' %}">Journal</a></div>
                <div class="menu-item"><a class="menu-item" href="{% url 'activities' %}">Activities</a></div>
                <div class="menu-item"><a class="menu-item" href="{% url 'settings_main' %}">Settings</a></div>
                
                <!-- Logout Button -->
                <div class="menu-item">
                    <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="logout-btn">Logout</button>
                    </form>
                </div>
            </div>
        </aside>                

        <!-- Main content with curved corners -->
        <div class="main-area">
            <main class="main-content">
                <header class="header">
                    <h1>Journal</h1>
                </header>

                <!-- Journal Entry Form -->
                <form method="post" action="{% url 'journal_create' %}" id="journalForm">
                    {% csrf_token %}
                    
                    <!-- Hidden Fields for Submission -->
                    <input type="hidden" id="title" name="title">
                    <input type="hidden" id="content" name="content">
                    
                    <!-- Visible Fields for User Input -->
                    <input type="text" id="journal-title" class="journal-title" placeholder="Title of your journal entry">
                    
                    <hr class="journal-divider">
                    <div id="editor" class="editor" contenteditable="true" placeholder="Write your thoughts here..."></div>
                    
                    <button class="save-button">Save Entry</button>
                </form>

                <!-- Toolbar and Save Button Wrapper -->
                <div class="toolbar-save-wrapper">
                    <div class="toolbar">
                            <button id="bold" class="toolbar-btn"><i class="bi bi-type-bold"></i></button>
                            <button id="italic" class="toolbar-btn"><i class="bi bi-type-italic"></i></button>
                            <button id="underline" class="toolbar-btn"><i class="bi bi-type-underline"></i></button>
                            <button id="font" class="toolbar-btn"><i class="bi bi-fonts"></i></button>
                            <button id="attach" class="toolbar-btn"><i class="bi bi-paperclip"></i></button>
                    </div>
                    
                    <button class="save-button">Save Entry</button>

                </div>
            </main>

        </div>
    </div>
    <script>
        document.querySelector('.save-button').addEventListener('click', function (e) {
            e.preventDefault();  // Prevent form's default submission
            document.getElementById('title').value = document.getElementById('journal-title').value;
            document.getElementById('content').value = document.getElementById('editor').innerText;  // Or use .innerHTML if you want HTML formatting

            // Submit the form after updating hidden fields
            document.getElementById('journalForm').submit();
        });
    </script>
</body>
</html>